<div class="clr-row diagram-layout">
	<div class="clr-col-12 diagram-layout-content" #diagramLayoutContent>
		<div id="diagram-container"
				 class="diagram-container"
         #diagramContainer>
		</div>

		<tds-context-menu
			[data]="ctxMenuData$ | async"
			(actionDispatched)="onCtxMenuActionDispatched($event)"
      #tdsCtxMenu></tds-context-menu>

		<div id="graph-control-btn-group">
			<button class="btn">
				<fa-icon [icon]="faIcons.faCog" size="lg"></fa-icon>
			</button>
			<button class="btn" (click)="zoomIn()">
				<fa-icon [icon]="faIcons.faSearchPlus" size="lg"></fa-icon>
			</button>
			<button class="btn" (click)="zoomOut()">
				<fa-icon [icon]="faIcons.faSearchMinus" size="lg"></fa-icon>
			</button>
		</div>

		<div
			id="overview-container"
			class="overview-container"
			[class.reset-overview-index]="resetOvIndex"
			*ngIf="isOverviewVisible"
      #overviewContainer></div>

		<div id="node-tooltip" class="card diagram-card" #nodeTooltip>
			<div class="card-header clr-align-self-center" [style.background]="tooltipData?.headerBackgroundColor">
				<p [style.color]="tooltipData?.headerTextColor"> {{tooltipData?.headerText}} </p>
			</div>

			<div class="card-block" *ngIf="tooltipData && tooltipData.data">
				<div class="card-text" style="text-align: center;">
					<div class="clr-row" *ngFor="let data of tooltipData.data">
						<div class="clr-col-6 clr-align-self-center tooltip-data-label">{{data?.label}}: </div> <div class="clr-col-6 clr-align-self-center" style="float: right;">{{data?.value}}</div>
					</div>
				</div>
			</div>
		</div>

		<button id="show-full-graph" *ngIf="showFullGraphBtn" (click)="showFullGraph()">Back to Full Graph</button>
		<div
			id="full-view"
			class="full-view"
			*ngIf="!!canExpand">
			<fa-icon *ngIf="!isExpanded" [icon]="!!isExpanded ?  faIcons.faCompress : faIcons.faExpand" size="lg" (click)="isFullView = !isExpanded"></fa-icon>
		</div>
	</div>
</div>

<div *ngIf="isFullView">
	<div class="modal">
		<div class="modal-dialog modal-xl" role="dialog" aria-hidden="true">
			<div class="modal-content">
				<div class="modal-header">
					<button aria-label="Close" class="close" type="button" (click)="isFullView = false;">
						<clr-icon aria-hidden="true" shape="close"></clr-icon>
					</button>
				</div>
				<div class="modal-body">
					<tds-lib-diagram-layout
						[data]="asObservable(data) | async"
						[layout]="asObservable(layout) | async"
						[currentUser]="asObservable(currentUser) | async"
						[contextMenuOptions]="asObservable(contextMenuOptions) | async"
						[icons]="asObservable(icons) | async"
						[nodeTemplate]="asObservable(nodeTemplate) | async"
						[linkTemplate]="asObservable(linkTemplate) | async"
						[lowScaleTemplate]="asObservable(lowScaleTemplate) | async"
						[mediumScaleTemplate]="asObservable(mediumScaleTemplate) | async"
						[isExpanded]="true"
					></tds-lib-diagram-layout>
				</div>
				<div class="modal-footer">
					<button class="btn btn-outline" type="button">Cancel</button>
					<button class="btn btn-primary" type="button">Ok</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal-backdrop" aria-hidden="true"></div>
</div>
